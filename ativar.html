<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ativar Premium - MBS Technology</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="header">
        MBS Technology
    </div>
  <div class="admin" style="text-align: center; margin-top: 80px;">
    <h2>Ativação Premium</h2>
    <p>Digite seu código de ativação:</p>
    <input type="text" id="codigo" placeholder="Ex: MBS-AB12-3F9C-7D4E" maxlength="19" autocomplete="off" />
    <br />
    <button onclick="ativarPremium()" style="margin-top: 15px;">Ativar</button>
    <p id="msg-status" style="margin-top: 15px; font-weight: bold; color: #00d9ff;"></p>
  </div>

  <script>
    function validarCodigo(codigo) {
      const regex = /^MBS-([0-9A-F]{4})-([0-9A-F]{4})-([0-9A-F]{4})$/i;
      if (!regex.test(codigo)) return false;

      const hex = "0123456789ABCDEF";
      let soma = 0;
      let chars = codigo.toUpperCase().replace(/-/g, '').slice(3);

      for (let i = 0; i < chars.length; i++) {
        if (i === chars.length - 2) continue; // Ignora penúltimo caractere (checksum)
        let val = hex.indexOf(chars[i]);
        if (val === -1) return false;
        soma += val;
      }

      let checksum = soma % 16;
      let checksumChar = hex[checksum];

      return chars[chars.length - 2] === checksumChar;
    }

    function ativarPremium() {
      const codigoInput = document.getElementById("codigo");
      const codigo = codigoInput.value.trim().toUpperCase();
      const msg = document.getElementById("msg-status");

      if (!validarCodigo(codigo)) {
        msg.style.color = "#ff5555";
        msg.innerText = "Código inválido. Verifique e tente novamente.";
        return;
      }

      localStorage.setItem("premium_ativo", "true");
      localStorage.setItem("premium_validade", Date.now().toString());
      msg.style.color = "#00ff88";
      msg.innerText = "Premium ativado por 30 dias!";

      // Opcional: desabilitar input e botão após ativação
      codigoInput.disabled = true;
      document.querySelector("button").disabled = true;

      // Recarregar para atualizar status, se necessário
      setTimeout(() => location.reload(), 1500);
    }
  </script>
</body>
</html>
